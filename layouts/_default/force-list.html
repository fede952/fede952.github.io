{{ define "main" }}
<main class="main">
  <header class="page-header">
    <h1>{{ .Title }}</h1>
    <div class="post-description">{{ .Description }}</div>
  </header>

  <div class="post-list" style="margin-top: 2rem;">
    {{ $currentSection := .Section }}
    {{ $items := where site.RegularPages "Section" $currentSection }}

    {{ range $items }}
      <article class="post-entry" style="margin-bottom: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px; border: 1px solid #333;">
        <header class="entry-header">
          <h2 style="font-size: 1.5rem; margin-bottom: 0.5rem;">
            <a href="{{ .Permalink }}">{{ .Title }}</a>
          </h2>
        </header>
        {{ if .Description }}
        <section class="entry-content">
          <p>{{ .Description }}</p>
        </section>
        {{ end }}
        <footer class="entry-footer" style="font-size: 0.8rem; color: #888; margin-top: 0.5rem;">
          {{ .Date.Format "Jan 2, 2006" }}
        </footer>
        <a class="entry-link" aria-label="post link to {{ .Title }}" href="{{ .Permalink }}"></a>
      </article>
    {{ end }}

    {{ if eq (len $items) 0 }}
      <p style="color: red; padding: 20px; border: 1px solid red;">
        CRITICAL ERROR: No pages found for section '{{ $currentSection }}'.
        <br>Check: 1. Files exist in content/{{ $currentSection }}? 2. Draft is false?
      </p>
    {{ end }}
  </div>
</main>
{{ end }}
